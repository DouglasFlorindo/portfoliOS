<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>portfoliOS</title>
    <link rel="icon" href="resources/svg/icon.svg">
    <link rel="stylesheet" href="styles/toolbox/toolbox.css">
    <link rel="stylesheet" href="styles/composition.css">
    <script type="module">
        import WindowsManager from './dist/windowsManager.js'
        import { WindowTypes } from './dist/window.js'
        import getTime from './dist/time.js'
        import {isMobile} from './dist/utils.js'


        document.addEventListener("DOMContentLoaded", () => {
            const desktopEl = document.querySelector('[element-role="desktop-area"]');
            const taskbarEl = document.querySelector('[element-role="taskbar-container"]');

            const windowsManager = new WindowsManager(desktopEl, taskbarEl)

            checkMobile()
            addBehaviours()



            // WindowsManager.newWindow(WindowTypes.PORTFOLIO)

            function addBehaviours() {
                window.addEventListener("resize", checkMobile);

                const timeEl = document.querySelector("[element-role='time']")
                if (timeEl) setInterval(() => { timeEl.textContent = getTime() }, 500)

                const buttonRoleWindowTypeMap = new Map([
                    ["profile-button", WindowTypes.PROFILE],
                    ["portfolio-button", WindowTypes.PORTFOLIO],
                    ["curriculum-button", WindowTypes.CURRICULUM],
                    ["contact-button", WindowTypes.CONTACT],
                ]);

                for (const [role, type] of buttonRoleWindowTypeMap) {
                    const button = document.querySelector(`[element-role='${role}']`);
                    button?.addEventListener("click", () => WindowsManager.newWindow(type));
                }

                const homeButton = document.querySelector("[element-role='home-button']")
                homeButton.addEventListener("click", () => WindowsManager.removeAllWindows())
            }

            function checkMobile() {
                const body = document.querySelector("body")

                isMobile() ? body.setAttribute("mobile-mode", "true") : body.setAttribute("mobile-mode", "false")
            }
        })

    </script>
</head>

<body mobile-mode="false" debug="false" class="window-crt-effect flex-start flex-c no-gap">

    <main element-role="desktop-area" class="desktop desktop-background expand-w flex-c relative">
        <ul class="desktop-icon-list flex-r flex-start expand-w">
            <li class="desktop-icon">
                <button class="button-icon button" element-role="profile-button" aria-label="Abrir janela Perfil">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                        width="24px" fill="#e3e3e3" aria-label="ícone Perfil">
                        <path
                            d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Z" />
                    </svg>
                    Perfil
                </button>
            </li>
            <li class="desktop-icon">
                <button class="button-icon button" element-role="portfolio-button" aria-label="Abrir janela Portfólio">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                        width="24px" fill="#e3e3e3">
                        <path d="M80-120v-600h240v-160h320v160h240v600H80Zm320-600h160v-80H400v80Z" />
                    </svg>
                    Portfólio
                </button>
            </li>
            <li class="desktop-icon">
                <button class="button-icon button" element-role="curriculum-button" aria-label="Abrir janela Currículo">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                        width="24px" fill="#e3e3e3">
                        <path
                            d="M320-440h320v-80H320v80Zm0 120h320v-80H320v80Zm0 120h200v-80H320v80ZM160-80v-800h400l240 240v560H160Zm360-520h200L520-800v200Z" />
                    </svg>
                    Currículo
                </button>
            </li>
            <li class="desktop-icon">
                <button class="button-icon button" element-role="contact-button" aria-label="Abrir janela Contato">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                        width="24px" fill="#e3e3e3" aria-label="ícone Contato">
                        <path d="M80-160v-640h800v640H80Zm400-280 320-200v-80L480-520 160-720v80l320 200Z" />
                    </svg>
                    Contato
                </button>
            </li>
            <li class="desktop-icon">
                <a class="button-icon button anchor flex-c no-gap text-center" aria-label="Ir para versão simples"
                    href="simplified.html" target="_blank">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                        width="24px" fill="#e3e3e3">
                        <path
                            d="M120-120v-720h360v80H200v560h560v-280h80v360H120Zm268-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z" />
                    </svg>
                    Versão simples
                </a>
            </li>
        </ul>
    </main>

    <nav class="window-crt-effect window-opaque taskbar window-border expand-w flex-r no-gap fixed-bottom">
        <div class="expand-h flex-grow flex-start no-gap no-wrap flex-r" element-role="taskbar-container">
            <span></span>

        </div>
        <div class="flex-c expand-h wrapper">
            <time element-role="time">00:00</time>
        </div>
    </nav>

    <nav class="navbar window-crt-effect window-border expand-w flex-r no-gap fixed-bottom">
        <div class="expand-h flex-r">
            <button class="button-icon button expand-h" element-role="home-button" aria-label="Configutações">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#CCCCCC"><path d="M160-120v-480l320-240 320 240v480H560v-280H400v280H160Z"/></svg>
            </button>
        </div>
    </nav>

</body>

</html>